<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>画像リネーム・ダウンロードツール</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      max-width: 800px;
      margin: 0 auto;
      background-color: #f8f9fa;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .section {
      margin-bottom: 25px;
    }

    h2 {
      color: #333;
      margin-bottom: 20px;
    }

    label {
      margin-right: 20px;
      font-weight: 500;
    }

    select,
    input[type="file"] {
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 5px;
      width: 100%;
      max-width: 300px;
    }

    select {
      min-width: 200px;
    }

    @media (max-width: 768px) {
      body {
        padding: 15px;
      }

      .container {
        padding: 20px;
      }

      select,
      input[type="file"] {
        max-width: 100%;
      }

      .radio-group {
        flex-direction: column;
        gap: 5px;
      }

      label {
        margin-right: 0;
        margin-bottom: 5px;
      }

      .current-selection .number {
        font-size: 24px;
      }
    }

    button {
      padding: 12px 24px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover:not(:disabled) {
      background-color: #0056b3;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .filename {
      background: #e9ecef;
      padding: 8px 12px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 14px;
      border: 1px solid #dee2e6;
    }



    .current-selection {
      background: linear-gradient(135deg, #007bff, #0056b3);
      color: white;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      margin: 20px 0;
    }

    .current-selection .number {
      font-size: 32px;
      font-weight: bold;
      margin: 0 10px;
    }

    .radio-group {
      display: flex;
      gap: 15px;
      margin: 10px 0;
    }

    .instructions {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      padding: 15px;
      border-radius: 8px;
      margin-top: 30px;
    }

    .instructions h4 {
      color: #0c5460;
      margin: 0 0 10px 0;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>🖼️ 画像リネーム・ダウンロードツール</h2>

    <div class="section">
      <label for="fileInput"><strong>画像ファイルを選択:</strong></label><br>
      <input type="file" id="fileInput" accept="image/*" style="margin-top: 8px;">
      <div id="fileStatus" style="margin-top: 10px; color: #666; font-size: 14px;">
        ファイルが選択されていません
      </div>
    </div>

    <div class="section">
      <strong>キャラクタータイプ:</strong><br>
      <div style="margin-top: 8px;">
        <label style="display: block; margin-bottom: 8px;"></label>
        <input type="radio" name="type" value="flying" checked onchange="handleTypeChange()">
        🎃 flying-characters
        </label>
        <label style="display: block;">
          <input type="radio" name="type" value="walking" onchange="handleTypeChange()">
          🚶 walking-characters
        </label>
      </div>
    </div>

    <div id="flyingSection" class="section">
      <strong>キャラクター選択:</strong><br>
      <span style="color: #666; font-size: 14px;">飛行キャラクター (1-20)</span>
      <div style="margin-top: 10px;">
        <select id="flyingSelect" onchange="updateNum(this.value)">
          <option value="1">キャラクター 1</option>
          <option value="2">キャラクター 2</option>
          <option value="3">キャラクター 3</option>
          <option value="4">キャラクター 4</option>
          <option value="5">キャラクター 5</option>
          <option value="6">キャラクター 6</option>
          <option value="7">キャラクター 7</option>
          <option value="8">キャラクター 8</option>
          <option value="9">キャラクター 9</option>
          <option value="10">キャラクター 10</option>
          <option value="11">キャラクター 11</option>
          <option value="12">キャラクター 12</option>
          <option value="13">キャラクター 13</option>
          <option value="14">キャラクター 14</option>
          <option value="15">キャラクター 15</option>
          <option value="16">キャラクター 16</option>
          <option value="17">キャラクター 17</option>
          <option value="18">キャラクター 18</option>
          <option value="19">キャラクター 19</option>
          <option value="20">キャラクター 20</option>
        </select>
      </div>
    </div>

    <div id="walkingSection" class="section" style="display: none;">
      <strong>キャラクター選択:</strong><br>
      <span style="color: #666; font-size: 14px;">歩行キャラクター</span>

      <div style="margin: 15px 0;">
        <strong>方向:</strong><br>
        <div class="radio-group">
          <label style="display: block; margin-bottom: 8px;">
            <input type="radio" name="direction" value="left" checked onchange="updateDirection()">
            ⬅️ left
          </label>
          <label style="display: block;">
            <input type="radio" name="direction" value="right" onchange="updateDirection()">
            ➡️ right
          </label>
        </div>
      </div>

      <div style="margin-top: 10px;">
        <strong>番号:</strong><br>
        <select id="walkingSelect" onchange="updateNum(this.value)" style="margin-top: 5px;">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      </div>
    </div>

    <div class="current-selection">
      <strong>現在選択中:</strong>
      <span class="number" id="currentNum">1</span>
      <strong>番</strong>
    </div>

    <div class="section">
      <strong>生成されるファイル名:</strong><br>
      <div class="filename" id="filename" style="margin-top: 8px;">character1.png</div>
    </div>

    <div class="section">
      <button id="downloadBtn" onclick="download()" disabled>
        💾 リネームしてダウンロード
      </button>
    </div>

    <div class="instructions">
      <h4>📁 使用方法</h4>
      <div><strong>配置先:</strong> images/changeable/flying-characters または walking-characters</div>
      <div><strong>手順:</strong> ダウンロード後、上記フォルダにファイルを移動してください</div>
    </div>
  </div>

  <script>
    let currentFile = null;
    let currentType = 'flying';
    let currentNum = 1;
    let currentDirection = 'left';

    // 初期化
    document.addEventListener('DOMContentLoaded', function () {
      updateFilename();

      document.getElementById('fileInput').addEventListener('change', function (e) {
        currentFile = e.target.files[0];
        const fileStatus = document.getElementById('fileStatus');

        if (currentFile) {
          fileStatus.textContent = `選択されたファイル: ${currentFile.name}`;
          fileStatus.style.color = '#007bff';
          document.getElementById('downloadBtn').disabled = false;
        } else {
          fileStatus.textContent = 'ファイルが選択されていません';
          fileStatus.style.color = '#666';
          document.getElementById('downloadBtn').disabled = true;
        }
      });
    });

    function handleTypeChange() {
      const type = document.querySelector('input[name="type"]:checked').value;
      currentType = type;
      currentNum = 1;

      if (type === 'flying') {
        document.getElementById('flyingSection').style.display = 'block';
        document.getElementById('walkingSection').style.display = 'none';
      } else {
        document.getElementById('flyingSection').style.display = 'none';
        document.getElementById('walkingSection').style.display = 'block';
      }

      updateNum(1);
    }

    function updateNum(num) {
      currentNum = parseInt(num);
      document.getElementById('currentNum').textContent = currentNum;

      // セレクトボックスを同期
      if (currentType === 'flying') {
        document.getElementById('flyingSelect').value = currentNum;
      } else {
        document.getElementById('walkingSelect').value = currentNum;
      }

      updateFilename();
    }

    function updateDirection() {
      currentDirection = document.querySelector('input[name="direction"]:checked').value;
      updateFilename();
    }

    function updateFilename() {
      let filename;
      if (currentType === 'flying') {
        filename = `character${currentNum}.png`;
      } else {
        filename = `walking-${currentDirection}-${currentNum}.png`;
      }
      document.getElementById('filename').textContent = filename;
    }

    function download() {
      if (!currentFile) return;

      const link = document.createElement('a');
      link.href = URL.createObjectURL(currentFile);
      link.download = document.getElementById('filename').textContent;
      link.click();
    }
  </script>
</body>

</html>